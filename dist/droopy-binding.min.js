!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(t){t.droopyBinding={},t.DroopyBinding=e("../src/droopyBinding"),n.DroopyBinding=t.DroopyBinding}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../src/droopyBinding":5}],2:[function(e,t){var n=function(){this.eventKeys={},this.lastSubscriptionId=-1};n.prototype.on=function(e,t){if("function"==typeof t){this.eventKeys[e]||(this.eventKeys[e]={subscriptions:{}});var n=(++this.lastSubscriptionId).toString();return this.eventKeys[e].subscriptions[n]=t,n}return!1},n.prototype.off=function(e,t){if("function"==typeof t){if(this.eventKeys[e]){var n=this.eventKeys[e].subscriptions,r=null;for(var i in n)n.hasOwnProperty(i)&&n[i]===t&&(r=i);null!==r&&delete n[r]}}else this.eventKeys[e]&&this.eventKeys[e].subscriptions[t]&&delete this.eventKeys[e].subscriptions[t]},n.prototype.trigger=function(e){var t=this;if(t.eventKeys[e]){var n=Array.prototype.slice.call(arguments,1),r=n[0],i=n[1],o=n[2];n.length>3&&(r=n);var a=t.eventKeys[e].subscriptions;setTimeout(function(){for(var e in a)a.hasOwnProperty(e)&&a[e](r,i,o)},0)}},t.exports=n},{}],3:[function(e,t){var n={Placeholder:function(e){this.raw=e,this.fullProperty=e.slice(2,e.length-2)},getPlaceHolders:function(e,t){var n=t||/\{\{[^\}]+\}\}?/g,r=e.match(n);return r||[]},getObjectValue:function(e,t){for(var n=e,i=t.split("."),o=0;o<i.length;o++){var a=i[o];n=null!=n[a]?n[a]:"Not Found: "+t}if("_"===t&&(n=e),"string"==typeof n&&-1!==n.indexOf("/Date(")){var s=r(n);n=s.toLocaleDateString()}return n},populateTemplate:function(e,t,n){for(var r=this.getPlaceHolders(e,n)||[],i=e,o=0;o<r.length;o++){var a=new this.Placeholder(r[o]);a.val=this.getObjectValue(t,a.fullProperty);var s=a.raw.replace("[","\\[").replace("]","\\]"),u="g";i=i.replace(new RegExp(s,u),a.val)}return i}};n.Each={regExp:/\{\[[^\]]+\]\}?/g,populateEachTemplates:function(e,t){var r=$(e),i=r.find("[data-each]");i.each(function(){var e="",i=$(this).html(),o=$(this).data("each"),a=sp.templating.getObjectValue(t,o);if(null!=a&&$.isArray(a))for(var s=0;s<a.length;s++)e+=n.populateTemplate(i,a[s],n.Each.regExp);r.find($(this)).html(e)});var o=r.clone().wrap("<div>");return o.parent().html()}},n.renderTemplate=function(e,t,r){var i=n.populateTemplate(e,t);return r&&(i=n.Each.populateEachTemplates(i,t)),i};var r=function(e){var t=e.substring(e.indexOf("(")+1);t=t.substring(0,t.indexOf(")"));var n=new Date(parseInt(t,10)),r=n.getTimezoneOffset()/60;return n.setHours(n.getHours()+r),n};t.exports=n},{}],4:[function(e,t){var n=e("droopy-templating"),r=function(e,t){this.element=e,this.original=e.innerHTML,this.fullProperty=t};r.prototype.update=function(e){var t=this,r="",i=n.getObjectValue(e,t.fullProperty);if(i&&Array.isArray(i))for(var o=0;o<i.length;o++)r+=n.populateTemplate(t.original,i[o],n.Each.regExp);t.element.innerHTML=r},t.exports=r},{"droopy-templating":3}],5:[function(e,t){var n=e("droopy-templating"),r=e("./nodeBinding"),i=e("./arrayBinding"),o=function(e,t,n){this.model=t,this.container=document.getElementById(e),this.bindings=this.getBindings(this.container),n!==!1&&this.init()};o.prototype.init=function(){var e=this;e.updateBindings(),e.recursiveObserve(e.model,"",function(t,n){e.handleObjectChange(t,n)})},o.prototype.recursiveObserve=function(e,t,n){var r=this;(Array.isArray(e)||"object"==typeof e)&&(Array.isArray(e)?(Array.observe?Array.observe(e,function(e){r.handleArrayChange(e,t)}):Object.observe(e,function(e){r.handleArrayChange(e,t)}),e.forEach(function(e){r.recursiveObserve(e,"",function(e){r.handleArrayChange.call(r,e,t)})})):(Object.observe(e,function(e){n(e,t)}),Object.keys(e).forEach(function(i){var o=t;o?o+="."+i:o=i,r.recursiveObserve(e[i],o,n)})))},o.prototype.handleArrayChange=function(e,t){var n=this;e.forEach(function(e){Array.isArray(e.object)&&"update"===e.type?n.recursiveObserve(e.object[e.name],"",function(e){n.handleArrayChange.call(n,e,t)}):Array.isArray(e.object)&&"splice"===e.type&&e.addedCount>0&&n.recursiveObserve(e.object[e.index],"",function(e){n.handleArrayChange.call(n,e,t)})}),n.bindings.forEach(function(e){e.fullProperty===t&&e.update(n.model)})},o.prototype.handleObjectChange=function(e,t){var n=this;e.forEach(function(e){var r=e.name;t&&(r=t+"."+e.name),n.bindings.forEach(function(e){0===e.fullProperty.indexOf(r)&&e.update(n.model)}),"update"===e.type&&n.recursiveObserve(e.object[e.name],r,function(e,t){n.handleObjectChange(e,t)})})},o.prototype.updateBindings=function(){var e=this;e.bindings.forEach(function(t){t.update(e.model)})},o.prototype.updateModelProperty=function(e,t){for(var n=e.split("."),r=this.model,i=e,o=0;o<n.length-1;o++)null!=r[n[o]]&&(i=n[o],r=r[i]);"_"===e?r=t:(i=n[n.length-1],r[i]=t)},o.prototype.updateModel=function(e){this.model=e,this.init()},o.prototype.getBindings=function(e){var t=this,o=[],a=[],s=0;if(e.attributes)for(s=0;s<e.attributes.length;s++)if("data-each"===e.attributes[s].nodeName)o.push(new i(e,e.attributes[s].nodeValue));else{var u=n.getPlaceHolders(e.attributes[s].nodeValue).map(function(n){var i=new r(e.attributes[s],n,e);return i.on("input-change",t.updateModelProperty.bind(t)),i});o=o.concat(u)}if(e.childNodes&&e.childNodes.length)for(s=0;s<e.childNodes.length;s++)o=o.concat(t.getBindings(e.childNodes[s]));else{a=n.getPlaceHolders(e.textContent);var l=a.map(function(t){return new r(e,t)});o=o.concat(l)}return o},t.exports=o},{"./arrayBinding":4,"./nodeBinding":6,"droopy-templating":3}],6:[function(e,t){var n=e("droopy-templating"),r=e("droopy-events"),i=function(e,t,n){r.call(this),this.node=e,this.original=e.nodeValue,this.raw=t,this.fullProperty=this.raw.slice(2,this.raw.length-2),this.element=n||e,this.setupTwoWay()};i.prototype=new r,i.prototype.setupTwoWay=function(){"value"===this.node.nodeName&&this.element&&("input"===this.element.tagName.toLowerCase()&&this.element.addEventListener("input",this.onInputChange.bind(this)),"select"===this.element.tagName.toLowerCase()&&this.element.addEventListener("change",this.onInputChange.bind(this)))},i.prototype.onInputChange=function(){this.trigger("input-change",this.fullProperty,this.element.value)},i.prototype.update=function(e){var t=this,r=n.renderTemplate(t.original,e);t.node.nodeValue=r,"value"===t.node.nodeName&&t.element&&(t.element.value=r)},t.exports=i},{"droopy-events":2,"droopy-templating":3}]},{},[1]);