<!DOCTYPE html>
<html>
<head>
	<title>Droopy Binding Demo</title>
	<script src='dist/droopy-binding.js'></script>
</head>
<body>
	<div id='container' data-id='{{id}}' style='visibility: {{visibility}}'>
		Some text here for id: {{id}}
		<h1>{{title}}</h1>
		<p>{{details}}</p>
		<strong>Author: {{author.name}}</strong>
		<div style='margin-top:40px'>
			<label>Title:</label>
			<input id='titleTextBox' value='{{title}}' />
		</div>
		<ul data-each='items'>
			<li>{[_]}</li>
		</ul>

		<ul data-each='complexItems'>
			<li>{[name]}</li>
		</ul>
	</div>
	<script>
		// setup the initial object to bind to
		var model = {
		    id: 123,
		    title: "My Title",
		    details: "These are the details",
		    visibility: "visible",
		    author: {
		        name: "Andrew Petersen",
		        id: "12"
		    },
		    items: [
		    	"one",
		    	"two",
		    	"three",
		    	"four"
		    ],
		    complexItems: [
		    	{
		    		name: "itemOne",
		    		id: 1
		    	}, {
		    		name: "itemTwo",
		    		id:2
		    	}
		    ]
		};
		// create the binding and call 'init()' to display the default values
		var binding = new droopyBinding.OnewayBinding('container', model);
		
		// manually setup '2 way binding'
		var textBox = document.getElementById('titleTextBox');
		textBox.addEventListener("keyup", function() { 
		    model.title = textBox.value;
		}, false);

		// Pretend we made an async ajax request and got new property values for our model
		// The 'title' and 'details' will automatically update in the view
		// No UI code required
		setTimeout(function(){
		    model.title = "Updated Title",
		    model.details = "This simulates data changing after an async ajax request";
		}, 2500);

		// Even nested properties are supported
		setTimeout(function(){
		    model.complexItems[0].name = "I'm an array item nested property!";
		}, 3000);

				// Even nested properties are supported
		setTimeout(function(){
		    model.complexItems.push({name: "And I'm a whole new item"});
		}, 3000);
	</script>
</body>
</html>